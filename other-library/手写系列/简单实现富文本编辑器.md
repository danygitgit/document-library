# [Markdown 博客模板](https://github.com/danygitgit/document-library)

> create by **db** on **2020-9-2 13:30:46**  
> Recently revised in **2020-9-2 13:30:51**
>
> **闲时要有吃紧的心思，忙时要有悠闲的趣味**

<a id="catalog">目录</a>

- [前言](#preface)
- [正文](#main-body)

  - [一、第一章](#chapter-1)
  - [二、第二章](#chapter-2)
  - [三、第三章](#chapter-3)
  - [四、第四章](#chapter-4)
  - [五、第五章](#chapter-5)

- [总结](#summary)

- [参考文档](#reference-documents)

# <a  id="preface">前言</a>

> [返回目录](#catalog)

&emsp;这里是前言内容！

# <a  id="main-body">正文</a>

&emsp;这里是正文内容！

## <a  id="chapter-1">一、第一章</a>

> [返回目录](#catalog)


&emsp;富文本编辑器又称为 WYSIWYG(所见即所得)，其本质就是在一个页面元素中嵌入 HTML 代码，并且这个元素可以像文档输入框一样进行文本的编辑，它同时还可以设置文本样式。写博客的工具就是一个功能丰富的富文本编辑器，编辑邮件以及论坛发贴都用到富文本编辑器。

启动富文本编辑：设置 contenteditable
　　让元素的内嵌 HTML 可以编辑，有三种实现方法：

1. 在 HTML 标签里写入 contenteditable 即可。

```html
<div
  style="border:1px solid #f00;width:100px;height:100px"
  contenteditable
></div>
```

2. 在脚本中设置对应元素的 contentEditable 值为 true。这个属性有三种取值，false/true/inherit 分别对应“关闭”/“开启”/“继承”。
```js
document.getElementById("editor").contentEditable = true;
```
3. 对于内嵌框架可以设置 designMode="on"，不过这种方式兼容性不太好。

富文本编辑器样式命令：document.execCommand()
　　其实元素设置 contentedable 后就已经实现了一个最基本的富文本编辑器，只是这个编辑器和文本输入框一样，实在简陋。如果它能很便捷的设置内容的样式，那就完美了。

与富文本样式交互的方法是 document.execCommand()。execCommand 函数传递三个参数，第一个参数为命令，第二个参数表示是否需要提示用户提供给该命令一个值，第三个参数表示执行当前命令的参数值。有些浏览器设置第二个参数为 true 会报错，所以为了便于移植，通常我们设置为 false。

比如要给选中文本字体加粗，命令表达式当如下所示：

document.execCommand(bold, false, null);
　　常用命令有：

backcolor:设置文档背景颜色、bold:文本加粗、copy:复制到剪切板、createlink:给选中文本设置连接、cut:剪切、delete:删除文本、fontname:字体名称

fontsize:字体大小、forecolor:字体换色、formatblock:用 HTML 标签格式化选中文本、indet:缩进、inserthorizontalrule:插入<hr>、insertimage:插入图片

insertorderedlist:插入<ol>、insertunorderedlist:插入<ul>、insertparagraph:插入<p>、italic:文本斜体、justifycenter:文本居中、justifyleft:左对齐

outdent:减少缩进、paste:粘贴剪切板内容、removeformat:删除样式、selectall:选中所有文本、underline:添加下划线、unlink:撤销链接。

实现简易富文本编辑器
　　一个简易的富文本编辑器应该有一系列的样式按钮，一个编辑框。这里我就简单实现四个样式操作按钮。

复制代码

  <!-- 样式操作按钮 -->

<button id="btn1"></button>
<button id="btn2"></button>
<button id="btn3"></button>
<button id="btn4"></button>

  <!-- 编辑框 -->
  <div id="editor">
      Click to Editor...
  </div>
  <input id="printContent" type="button" value="打印编辑器内容">
复制代码
　　稍微给按钮以及编辑器设置下样式。

复制代码

<style type="text/css">
    #editor {
        width:600px;
        height:200px;
        border:1px solid #ccc;
    }
    button {
        margin:1px;
        border:1px solid #aaa;
        background:#ffe;
        cursor:pointer;
        overflow:hidden;
    }
    button:hover {
        background:#ccc;
        border:1px solid #00f;
    }
</style>

复制代码
　　页面画出来后，接下来我们来实现其功能。

让编辑器生效只需

1.开启元素的编辑功能 editor.contentEditable = true;

2.给所有样式按钮绑定启动 document.execCommand 的事件。

//初始化
function initEditor() {
openOrCloseEditor("editor", "true");//开启元素编辑
bindBtnCommand();//给样式按钮绑定命令
}
　　开启元素编辑的 openOrCloseEditor 函数实现如下：

复制代码
/\*\*

-
- 功能： 开启元素编辑功能
- 输入： el：编辑器 ID; operate：Boolean 值，表示启动还是关闭
  \*/
  function openOrCloseEditor(el, operate) {
  var editor = document.getElementById(el);
  editor.contentEditable = operate;
  }
  复制代码
  　　绑定样式按钮 bindBtnCommand 函数实现如下：

复制代码
//按钮绑定命令
function bindBtnCommand() {
var btns = document.getElementsByTagName("button"),
btnConfigs = "backcolor|#f00|设置背景色 bold|null|字体加粗 indent|null|缩进 fontName|微软雅黑|转换字体".split(" "),
len = btnConfigs.length;
for(var i = 0, btnConfig; btnConfig = btnConfigs[i]; i++) {
(function(btnConfig, btn) {
var msg = btnConfig.split("|"),
lab = msg[0],
value = msg[1],
title = msg[2];
btn.innerHTML = lab;
btn.title = title;
btn.onclick = function(e) {
document.execCommand(lab, false, value);
}
})(btnConfig, btns[i]);
}
}
复制代码
　　接下来实现“打印编辑内容”按钮功能：

复制代码
//获取编辑器内嵌内容
function getContent(el) {
var editor = document.getElementById(el);
return editor.innerHTML;
}

//打印按钮绑定触发事件
document.getElementById("printContent").onclick = function(e) {
var content = getContent("editor");
document.write(content);
};
复制代码
　　最后调用 initEditor 使编辑器生效

initEditor();
　　完整代码如下：

复制代码

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <title>简易富文本编辑器.html</title>
    
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
<style type="text/css">
    #editor {width:600px;height:200px;border:1px solid #ccc;
    }
    button {margin:1px;border:1px solid #aaa;background:#ffe;cursor:pointer;overflow:hidden;}
    button:hover {background:#ccc;border:1px solid #00f;}
</style>
  </head>
  
  <body>
  <button id="btn1"></button>
  <button id="btn2"></button>
  <button id="btn3"></button>
  <button id="btn4"></button>
  <div id="editor">
      Click to Editor...
  </div>
  <input id="printContent" type="button" value="打印编辑器内容">
  <script type="text/javascript">
        initEditor();
        
        //初始化
        function initEditor() {
            openOrCloseEditor("editor", "true");//开启元素编辑
            bindBtnCommand();//给样式按钮绑定命令
        }
        
        /**
        * 
        * 功能： 开启元素编辑功能
        * 输入： el：编辑器ID; operate：Boolean值，表示启动还是关闭
        */
        function openOrCloseEditor(el, operate) {
            var editor = document.getElementById(el);
            editor.contentEditable = operate;
        }
        
        //按钮绑定命令
        function bindBtnCommand() {
            var btns = document.getElementsByTagName("button"),
                btnConfigs = "backcolor|#f00|设置背景色 bold|null|字体加粗 indent|null|缩进 fontName|微软雅黑|转换字体".split(" "),
                len = btnConfigs.length;
            for(var i = 0, btnConfig; btnConfig = btnConfigs[i]; i++) {
                (function(btnConfig, btn) {
                    var msg = btnConfig.split("|"),
                        lab = msg[0],
                        value = msg[1],
                        title = msg[2];
                    btn.innerHTML = lab;
                    btn.title = title;
                    btn.onclick = function(e) {
                        document.execCommand(lab, false, value);
                    }
                })(btnConfig, btns[i]);
            }
        }

        //获取编辑器内嵌内容
        function getContent(el) {
            var editor = document.getElementById(el);
            return editor.innerHTML;
        }

        //打印按钮绑定触发事件
        document.getElementById("printContent").onclick = function(e) {
            var content = getContent("editor");
            document.write(content);
        };
    </script>

  </body>
</html>
复制代码
　　简易富文本编辑器达成！

## <a  id="chapter-2">二、第二章</a>

> [返回目录](#catalog)

&emsp;第二章内容！

## <a  id="chapter-3">三、第三章</a>

> [返回目录](#catalog)

&emsp;第三章内容！

## <a  id="chapter-4">四、第四章</a>

> [返回目录](#catalog)

&emsp;第四章内容！

## <a  id="chapter-5">五、第五章</a>

> [返回目录](#catalog)

&emsp;第五章内容！

# <a  id="summary">总结</a>

> [返回目录](#catalog)

&emsp;这里是总结内容！

### <a  id="reference-documents">参考文献</a>

- [Markdown 博客模板 | 掘金-豆包君](https://juejin.im/user/5b1a3eb7f265da6e572b3ada)

**后记：Hello 小伙伴们，如果觉得本文还不错，记得点个赞或者给个 star，你们的赞和 star 是我编写更多更丰富文章的动力！[GitHub 地址](https://github.com/danygitgit/document-library)**

# 文档协议

> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="https://user-gold-cdn.xitu.io/2018/12/23/167d9537f3e29c99?w=88&h=31&f=png&s=1888" /></a><br /><a xmlns:dct="http://purl.org/dc/terms/" property="dct:title">**db** 的文档库</a> 由 <a xmlns:cc="http://creativecommons.org/ns#" href="db" property="cc:attributionName" rel="cc:attributionURL">db</a> 采用 <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a>进行许可。<br />基于<a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/danygitgit" rel="dct:source">https://github.com/danygitgit</a>上的作品创作。<br />本许可协议授权之外的使用权限可以从 <a xmlns:cc="http://creativecommons.org/ns#" href="https://creativecommons.org/licenses/by-nc-sa/2.5/cn/" rel="cc:morePermissions">https://creativecommons.org/licenses/by-nc-sa/2.5/cn/</a> 处获得。
